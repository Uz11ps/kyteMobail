# –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Backend –≤ Yandex Cloud

## –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Yandex Cloud

### 1.1. –í–æ–π–¥–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://console.yandex.cloud (–∏–ª–∏ kz.console.yandex.cloud –¥–ª—è –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞)
2. –í–æ–π–¥–∏—Ç–µ —Å –∞–∫–∫–∞—É–Ω—Ç–æ–º –∑–∞–∫–∞–∑—á–∏–∫–∞ –∏–ª–∏ –ø–æ–ª—É—á–∏—Ç–µ –¥–æ—Å—Ç—É–ø

### 1.2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥

–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–∞–ª–æ–≥: `ao7gso7afqnk7771b5l1` (–∏–∑ URL)

### 1.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ VPC —Å–µ—Ç—å

VPC —Å–µ—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞: `dbp2q6dsummhsc385asm`

---

## –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã

### 2.1. –°–æ–∑–¥–∞–π—Ç–µ VM

1. –í –∫–æ–Ω—Å–æ–ª–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ: **Compute Cloud ‚Üí –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã**
2. –ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É**

### 2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VM:

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **–ò–º—è:** `kyte-backend` –∏–ª–∏ `kyte-chat-backend`
- **–ó–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:** –í—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ru-central1-a`)
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Intel Ice Lake –∏–ª–∏ AMD EPYC

**–í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** Intel Ice Lake
- **vCPU:** 2 —è–¥—Ä–∞ (–º–∏–Ω–∏–º—É–º –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
- **RAM:** 2 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 GB –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- **–î–∏—Å–∫:** 20 GB SSD (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞)

**–°–µ—Ç—å:**
- **–ü–æ–¥—Å–µ—Ç—å:** –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Å–µ—Ç—å –≤ –≤–∞—à–µ–π VPC `dbp2q6dsummhsc385asm`
- **–ü—É–±–ª–∏—á–Ω—ã–π –∞–¥—Ä–µ—Å:** –í—ã–±–µ—Ä–∏—Ç–µ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IPv4:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–î–æ—Å—Ç—É–ø:**
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
- **–õ–æ–≥–∏–Ω:** `ubuntu` –∏–ª–∏ `admin`
- **SSH –∫–ª—é—á:** –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å SSH –∫–ª—é—á –Ω–∞ Windows:**

```powershell
# –í PowerShell
ssh-keygen -t rsa -b 4096 -C "your-email@example.com"

# –ö–ª—é—á –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –≤:
# C:\Users\1\.ssh\id_rsa (–ø—Ä–∏–≤–∞—Ç–Ω—ã–π)
# C:\Users\1\.ssh\id_rsa.pub (–ø—É–±–ª–∏—á–Ω—ã–π)

# –ü–æ–∫–∞–∂–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á:
cat C:\Users\1\.ssh\id_rsa.pub
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `id_rsa.pub` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ **SSH –∫–ª—é—á** –≤ Yandex Cloud.

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
- **–û–±—Ä–∞–∑:** Ubuntu 22.04 LTS (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### 2.3. –°–æ–∑–¥–∞–π—Ç–µ VM

–ù–∞–∂–º–∏—Ç–µ **–°–æ–∑–¥–∞—Ç—å** –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è (1-2 –º–∏–Ω—É—Ç—ã)

---

## –®–∞–≥ 3: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VM

### 3.1. –ü–æ–ª—É—á–∏—Ç–µ IP –∞–¥—Ä–µ—Å

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è VM –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- **–í–Ω–µ—à–Ω–∏–π IP:** –Ω–∞–ø—Ä–∏–º–µ—Ä `51.250.XX.XX`
- **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP:** –Ω–∞–ø—Ä–∏–º–µ—Ä `10.128.XX.XX`

### 3.2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å —á–µ—Ä–µ–∑ SSH

**Windows (PowerShell):**

```powershell
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh ubuntu@51.250.XX.XX

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–π –∫–ª—é—á:
ssh -i C:\Users\1\.ssh\id_rsa ubuntu@51.250.XX.XX
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ PuTTY:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ PuTTY
2. Host: `51.250.XX.XX`
3. Port: `22`
4. Connection ‚Üí SSH ‚Üí Auth ‚Üí Credentials ‚Üí Private key file: –≤—ã–±–µ—Ä–∏—Ç–µ `id_rsa`
5. Open

---

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 20.x
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# –ü—Ä–æ–≤–µ—Ä–∫–∞
node --version  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å v20.x.x
npm --version

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2
sudo npm install -g pm2

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git
sudo apt-get install -y git

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
sudo apt-get install -y nginx
```

---

## –®–∞–≥ 5: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 5.1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo mkdir -p /var/www/kyte-backend
cd /var/www/kyte-backend

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à URL)
sudo git clone <your-repo-url> .

# –ò–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ SCP –∏–∑ Windows:
# scp -r backend/* ubuntu@51.250.XX.XX:/var/www/kyte-backend/backend/
```

**–ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ SCP (Windows PowerShell):**

```powershell
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd C:\Users\1\Documents\GitHub\kyteMobail

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ backend
scp -r backend/* ubuntu@51.250.XX.XX:/tmp/backend/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª—ã:
# sudo mv /tmp/backend/* /var/www/kyte-backend/backend/
```

### 5.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd /var/www/kyte-backend/backend
sudo npm install --production
```

### 5.3. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
sudo nano /var/www/kyte-backend/backend/.env
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è):

```env
PORT=3000
NODE_ENV=production

# MongoDB Atlas (–≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
MONGODB_URI=mongodb+srv://zxcmandarin48_db_user:PeflQ6ZN6TemeRTJ@cluster0.6xsfpcu.mongodb.net/kyte_chat?retryWrites=true&w=majority

# JWT —Å–µ–∫—Ä–µ—Ç—ã (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –¥–ª—è production!)
JWT_SECRET=–≤–∞—à-—Å–ª—É—á–∞–π–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-–¥–ª—è-production
JWT_REFRESH_SECRET=–≤–∞—à-—Å–ª—É—á–∞–π–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-–¥–ª—è-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# OpenAI (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ)
OPENAI_API_KEY=–≤–∞—à-openai-–∫–ª—é—á

# CORS - –¥–æ–±–∞–≤—å—Ç–µ –¥–æ–º–µ–Ω—ã –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com,http://localhost:8080

# Encryption
ENCRYPTION_KEY=–≤–∞—à-32-—Å–∏–º–≤–æ–ª—å–Ω—ã–π-–∫–ª—é—á-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

# –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ...
```

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤:**

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Å–µ–∫—Ä–µ—Ç–∞
openssl rand -base64 32

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è encryption –∫–ª—é—á–∞
openssl rand -base64 24
```

### 5.4. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ PM2
cd /var/www/kyte-backend/backend
sudo pm2 start src/server.js --name kyte-backend

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo pm2 save

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo pm2 startup
# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∫–æ—Ç–æ—Ä—É—é –ø–æ–∫–∞–∂–µ—Ç PM2

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo pm2 status
sudo pm2 logs kyte-backend
```

---

## –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

### 6.1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
sudo nano /etc/nginx/sites-available/kyte-backend
```

–í—Å—Ç–∞–≤—å—Ç–µ:

```nginx
server {
    listen 80;
    server_name –≤–∞—à-–¥–æ–º–µ–Ω.com www.–≤–∞—à-–¥–æ–º–µ–Ω.com;

    # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        
        # –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è WebSocket
        proxy_connect_timeout 7d;
        proxy_send_timeout 7d;
        proxy_read_timeout 7d;
    }
}
```

### 6.2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–º–ª–∏–Ω–∫
sudo ln -s /etc/nginx/sites-available/kyte-backend /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
sudo systemctl restart nginx
```

---

## –®–∞–≥ 7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 7.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞ –≤ Yandex Cloud

1. –í –∫–æ–Ω—Å–æ–ª–∏: **VPC ‚Üí –ì—Ä—É–ø–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
2. –ù–∞–π–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–π VM
3. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞:

**–í—Ö–æ–¥—è—â–∏–µ:**
- **–ü–æ—Ä—Ç:** 22 (SSH) - —Ç–æ–ª—å–∫–æ –≤–∞—à IP
- **–ü–æ—Ä—Ç:** 80 (HTTP) - –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ü–æ—Ä—Ç:** 443 (HTTPS) - –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- **–ü–æ—Ä—Ç:** 3000 - —Ç–æ–ª—å–∫–æ –∏–∑ VPC (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

**–ò—Å—Ö–æ–¥—è—â–∏–µ:**
- –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 7.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ UFW –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ UFW
sudo apt-get install -y ufw

# –†–∞–∑—Ä–µ—à–∏—Ç–µ SSH, HTTP, HTTPS
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç–µ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä
sudo ufw enable

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
sudo ufw status
```

---

## –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL (Let's Encrypt)

### 8.1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot

```bash
sudo apt-get install -y certbot python3-certbot-nginx
```

### 8.2. –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
sudo certbot --nginx -d –≤–∞—à-–¥–æ–º–µ–Ω.com -d www.–≤–∞—à-–¥–æ–º–µ–Ω.com
```

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
- –í–≤–µ–¥–∏—Ç–µ email
- –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏
- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç HTTP ‚Üí HTTPS

### 8.3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞.

---

## –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

### 9.1. –í DNS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–µ (reg.ru, timeweb –∏ —Ç.–¥.)

–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å:
```
@    A    51.250.XX.XX    (IP –∞–¥—Ä–µ—Å –≤–∞—à–µ–π VM)
www  A    51.250.XX.XX
```

### 9.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ DNS –æ–±–Ω–æ–≤–∏–ª—Å—è
nslookup –≤–∞—à-–¥–æ–º–µ–Ω.com
```

---

## –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 10.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

```bash
# –° —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:3000/api/health

# –ò–∑–≤–Ω–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP –∏–ª–∏ –¥–æ–º–µ–Ω)
curl http://51.250.XX.XX/api/health
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è: {"status":"ok","timestamp":"..."}
```

### 10.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
http://51.250.XX.XX/api/health
```

---

## –®–∞–≥ 11: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### 11.1. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ PM2

```bash
sudo pm2 logs kyte-backend
sudo pm2 logs kyte-backend --lines 100  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
```

### 11.2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PM2
sudo pm2 monit

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
htop
# –∏–ª–∏
top
```

### 11.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Yandex Monitoring –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
- UptimeRobot (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
- Pingdom
- StatusCake

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo pm2 restart kyte-backend

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
sudo pm2 stop kyte-backend

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞
sudo pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
sudo pm2 info kyte-backend
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```bash
cd /var/www/kyte-backend/backend

# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo git pull

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo npm install --production

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
sudo pm2 restart kyte-backend
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx:

```bash
# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
sudo tail -f /var/log/nginx/access.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
sudo tail -f /var/log/nginx/error.log
```

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø .env –∏ –¥–∞–Ω–Ω—ã—Ö:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
sudo nano /root/backup.sh
```

```bash
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/root/backups"
mkdir -p $BACKUP_DIR

# –ë—ç–∫–∞–ø .env
cp /var/www/kyte-backend/backend/.env $BACKUP_DIR/env_$DATE

# –ë—ç–∫–∞–ø PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
pm2 save
cp ~/.pm2/dump.pm2 $BACKUP_DIR/pm2_$DATE

echo "Backup completed: $DATE"
```

```bash
# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
sudo chmod +x /root/backup.sh

# –î–æ–±–∞–≤—å—Ç–µ –≤ cron (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00)
sudo crontab -e
# –î–æ–±–∞–≤—å—Ç–µ: 0 3 * * * /root/backup.sh
```

---

## –°—Ç–æ–∏–º–æ—Å—Ç—å Yandex Cloud

### –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å VM:

- **2 vCPU, 2GB RAM, 20GB SSD:** ~500-800‚ÇΩ/–º–µ—Å—è—Ü
- **2 vCPU, 4GB RAM, 40GB SSD:** ~800-1200‚ÇΩ/–º–µ—Å—è—Ü

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã:

- **–ò—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫:** –ø–µ—Ä–≤—ã–µ 10GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –¥–∞–ª–µ–µ –æ—Ç 1.2‚ÇΩ/GB
- **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏:** –æ—Ç 2.5‚ÇΩ/GB/–º–µ—Å—è—Ü (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ Yandex Cloud
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 22 –æ—Ç–∫—Ä—ã—Ç –¥–ª—è –≤–∞—à–µ–≥–æ IP
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ VM –∑–∞–ø—É—â–µ–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ PM2 –∑–∞–ø—É—â–µ–Ω: `sudo pm2 status`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `sudo pm2 logs kyte-backend`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø–æ—Ä—Ç 3000 —Å–ª—É—à–∞–µ—Ç—Å—è: `sudo netstat -tlnp | grep 3000`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx: `sudo nginx -t`

### –ü—Ä–æ–±–ª–µ–º–∞: WebSocket –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å Upgrade –∏ Connection headers)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Socket.io –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥—Ä—É–ø–ø—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ø–æ—Ä—Ç 3000 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω)

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–í–∞—à backend —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Yandex Cloud –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- `http://51.250.XX.XX/api/health` (–ø–æ IP)
- `https://–≤–∞—à-–¥–æ–º–µ–Ω.com/api/health` (–ø–æ –¥–æ–º–µ–Ω—É)

