# Исправление проблемы с SSH подключением

## Проблема: "Operation not supported on socket"

Эта ошибка обычно означает проблему с форматом или путем к ключу.

## Решения:

### Решение 1: Проверьте формат ключа

Откройте файл ключа и проверьте:

**Правильный формат приватного ключа должен начинаться с:**
```
-----BEGIN OPENSSH PRIVATE KEY-----
```
или
```
-----BEGIN RSA PRIVATE KEY-----
```

**Если ключ начинается с другого** - возможно это публичный ключ или ключ в формате PuTTY.

### Решение 2: Используйте правильный путь

Попробуйте разные варианты пути:

```powershell
# Вариант 1: С двойными слешами
ssh -i "C:\\Users\\1\\.ssh\\yandex_key" kyte-777@94.131.80.213

# Вариант 2: С одинарными слешами в кавычках
ssh -i "C:/Users/1/.ssh/yandex_key" kyte-777@94.131.80.213

# Вариант 3: Относительный путь (если в директории .ssh)
cd C:\Users\1\.ssh
ssh -i yandex_key kyte-777@94.131.80.213
```

### Решение 3: Если ключ в формате PuTTY (.ppk)

Если заказчик дал файл `.ppk`:

1. **Установите PuTTY:**
   - Скачайте: https://www.putty.org/
   - Или через Chocolatey: `choco install putty`

2. **Используйте PuTTY для подключения:**
   - Host: `94.131.80.213`
   - Port: `22`
   - Connection → SSH → Auth → Credentials → Private key file: выберите `.ppk` файл
   - Connection → Data → Auto-login username: `kyte-777`
   - Open

3. **Или конвертируйте .ppk в OpenSSH формат:**
   - Используйте PuTTYgen (входит в PuTTY)
   - Load → выберите .ppk файл
   - Conversions → Export OpenSSH key
   - Сохраните как `yandex_key` (без расширения)

### Решение 4: Создайте новый ключ и попросите добавить

Если текущий ключ не работает:

```powershell
# Создайте новый ключ
ssh-keygen -t rsa -b 4096 -f C:\Users\1\.ssh\yandex_new_key -N '""'

# Покажите публичный ключ
cat C:\Users\1\.ssh\yandex_new_key.pub
```

**Попросите заказчика:**
1. Открыть консоль Yandex Cloud
2. Перейти к вашей VM
3. Добавить ваш публичный ключ (`yandex_new_key.pub`)
4. Или добавить через: **Compute Cloud → Виртуальные машины → ваша VM → SSH ключи → Добавить**

### Решение 5: Используйте пароль (если настроен)

Если заказчик настроил вход по паролю:

```powershell
ssh kyte-777@94.131.80.213
# Введите пароль когда попросит
```

### Решение 6: Проверьте права доступа к файлу ключа

```powershell
# Убедитесь что только вы можете читать ключ
icacls C:\Users\1\.ssh\yandex_key
# Должно быть: NT AUTHORITY\SYSTEM:(F), BUILTIN\Administrators:(F), Ваш-пользователь:(F)
```

---

## Пошаговая диагностика:

### Шаг 1: Проверьте что ключ существует

```powershell
Test-Path C:\Users\1\.ssh\yandex_key
```

### Шаг 2: Проверьте формат ключа

```powershell
Get-Content C:\Users\1\.ssh\yandex_key | Select-Object -First 1
```

Должно начинаться с `-----BEGIN`

### Шаг 3: Попробуйте подключиться с verbose режимом

```powershell
ssh -v -i C:\Users\1\.ssh\yandex_key kyte-777@94.131.80.213
```

Это покажет подробную информацию о процессе подключения.

### Шаг 4: Проверьте что ключ добавлен на сервере

Попросите заказчика проверить в консоли Yandex Cloud:
- **Compute Cloud → Виртуальные машины → ваша VM**
- В разделе **SSH ключи** должен быть ваш публичный ключ

---

## Альтернатива: Используйте Yandex Cloud Console

Если SSH не работает, можно использовать веб-консоль:

1. В консоли Yandex Cloud: **Compute Cloud → Виртуальные машины**
2. Найдите вашу VM
3. Нажмите на неё
4. В разделе **Доступ** нажмите **Подключиться**
5. Используйте веб-терминал в браузере

---

## Быстрое решение:

**Создайте новый ключ и попросите заказчика добавить его:**

```powershell
# 1. Создайте ключ
ssh-keygen -t rsa -b 4096 -f C:\Users\1\.ssh\yandex_cloud -N '""'

# 2. Покажите публичный ключ
Write-Host "Скопируйте этот ключ и попросите заказчика добавить его в VM:"
cat C:\Users\1\.ssh\yandex_cloud.pub
```

**Затем подключитесь:**
```powershell
ssh -i C:\Users\1\.ssh\yandex_cloud kyte-777@94.131.80.213
```

