# Настройка Android устройства для тестирования

## Быстрая настройка

### Шаг 1: Включите режим разработчика на Android

1. Откройте **Настройки** на телефоне
2. Перейдите в **О телефоне** (или **О смартфоне**)
3. Найдите **Номер сборки** (или **Версия MIUI** для Xiaomi)
4. **Нажмите 7 раз** на "Номер сборки"
5. Появится сообщение "Вы стали разработчиком!"

### Шаг 2: Включите отладку по USB

1. Вернитесь в **Настройки**
2. Найдите новый пункт **Для разработчиков** (или **Параметры разработчика**)
3. Включите **Отладка по USB** (USB Debugging)
4. Также включите **Установка через USB** (если есть)

### Шаг 3: Подключите устройство

1. Подключите телефон к компьютеру через USB кабель
2. На телефоне появится запрос **"Разрешить отладку по USB?"**
3. Поставьте галочку **"Всегда разрешать с этого компьютера"**
4. Нажмите **"Разрешить"**

### Шаг 4: Проверьте подключение

```powershell
flutter devices
```

Должно появиться что-то вроде:
```
sdk gphone64 arm64 (mobile) • emulator-5554 • android-arm64  • Android 13 (API 33)
```

или

```
SM-G991B (mobile) • R58M123456 • android-arm64  • Android 13 (API 33)
```

## Установка APK без USB отладки

Если USB отладка не работает, можно установить APK вручную:

1. **Соберите APK:**
   ```powershell
   .\scripts\build_apk.ps1
   ```

2. **Скопируйте APK на телефон:**
   - Через USB (режим передачи файлов)
   - Через облако (Google Drive, Dropbox)
   - Через email
   - Через Bluetooth

3. **На телефоне:**
   - Откройте файловый менеджер
   - Найдите APK файл
   - Нажмите на него
   - Если появится предупреждение "Установка заблокирована":
     - Настройки → Безопасность → Включите "Неизвестные источники"
   - Нажмите "Установить"

## Установка USB драйверов

Если устройство не определяется:

### Для Samsung:
- Установите [Samsung USB Driver](https://developer.samsung.com/mobile/android-usb-driver.html)

### Для Xiaomi:
- Установите [Mi USB Driver](https://www.xiaomi.com/support/download/driver)

### Для других производителей:
- Найдите USB драйверы на сайте производителя
- Или используйте универсальный [Universal ADB Driver](https://adb.clockworkmod.com/)

## Troubleshooting

### Устройство не определяется

1. **Проверьте кабель:**
   - Используйте оригинальный USB кабель
   - Некоторые кабели только для зарядки

2. **Проверьте режим USB:**
   - На телефоне выберите "Передача файлов" (MTP)
   - Не "Только зарядка"

3. **Перезапустите ADB:**
   ```powershell
   # Если ADB установлен
   adb kill-server
   adb start-server
   adb devices
   ```

4. **Проверьте драйверы в Диспетчере устройств:**
   - Win + X → Диспетчер устройств
   - Найдите ваше устройство
   - Если есть желтый треугольник - обновите драйверы

### Flutter не видит устройство

1. **Убедитесь, что Android SDK установлен:**
   ```powershell
   flutter doctor
   ```

2. **Проверьте переменные окружения:**
   - `ANDROID_HOME` должен указывать на папку Android SDK
   - `PATH` должен включать `%ANDROID_HOME%\platform-tools`

3. **Перезапустите терминал** после изменения переменных окружения

## Альтернативные способы установки

### Через ADB (если установлен):
```powershell
adb install build\app\outputs\flutter-apk\app-debug.apk
```

### Через файловый менеджер Windows:
1. Откройте `build\app\outputs\flutter-apk\`
2. Скопируйте `app-debug.apk` на телефон
3. Установите на телефоне

### Через облако:
1. Загрузите APK в Google Drive / Dropbox
2. Откройте на телефоне
3. Скачайте и установите

