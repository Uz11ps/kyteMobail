# CI/CD для Flutter веб-приложения

## ✅ Настроено автоматическое развертывание!

При каждом push в ветку `main` или `master` с изменениями в:
- `lib/**` (код приложения)
- `web/**` (веб-конфигурация)
- `pubspec.yaml` (зависимости)

Автоматически выполняется:
1. ✅ Сборка Flutter веб-приложения
2. ✅ Загрузка файлов на сервер
3. ✅ Настройка Nginx
4. ✅ Обновление CORS_ORIGIN

## Требуемые Secrets в GitHub

Убедитесь, что в GitHub репозитории настроены следующие secrets:

1. **SSH_PRIVATE_KEY** - приватный SSH ключ для подключения к серверу
2. **SERVER_USER** - пользователь на сервере (обычно `kyte-777`)
3. **SERVER_HOST** - IP адрес сервера (обычно `94.131.80.213`)

## Как настроить Secrets:

1. Перейдите в ваш GitHub репозиторий
2. **Settings** → **Secrets and variables** → **Actions**
3. Нажмите **New repository secret**
4. Добавьте каждый secret:

   - **Name:** `SSH_PRIVATE_KEY`
   - **Value:** Содержимое вашего приватного SSH ключа

   - **Name:** `SERVER_USER`
   - **Value:** `kyte-777`

   - **Name:** `SERVER_HOST`
   - **Value:** `94.131.80.213`

## Ручной запуск

Вы можете запустить деплой вручную:
1. Перейдите в **Actions** в GitHub репозитории
2. Выберите workflow **Deploy Flutter Web App to Yandex Cloud**
3. Нажмите **Run workflow**

## Что происходит при деплое:

1. **Сборка:** Flutter собирает веб-приложение для production
2. **Загрузка:** Файлы из `build/web/` загружаются на сервер в `/var/www/kyte-mobile/web/`
3. **Nginx:** Автоматически обновляется конфигурация для раздачи приложения по пути `/mobail`
4. **CORS:** Обновляется CORS_ORIGIN для разрешения запросов с сервера
5. **Проверка:** Проверяется что файлы загружены и Nginx работает

## Результат:

После успешного деплоя приложение будет доступно по адресу:
- **http://94.131.80.213/mobail/**

## Мониторинг:

Проверьте статус деплоя в разделе **Actions** вашего GitHub репозитория.



